<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>drag and drop</title>
</head>
<body>

    <div id="container"></div>

    <script src="../lib/three.js"></script>
    <script>
        var scene,
            camera,
            renderer,
            container;

        var selection,
            offset = new THREE.Vector3(),
            objects = [];
        
        var raycaster = new THREE.Raycaster();

        function init(){
            scene = new THREE.Scene();

            var 
                screen = {
                    width : window.innerWidth,
                    height : window.innerHeight
                };
            
            camera = new THREE.PerspectiveCamera(45, screen.width / screen.height, 1, 1000);
            scene.add(camera);
            
            camera.position.set(100,0,0);
            camera.lookAt(new THREE.Vector3(0,0,0));

            renderer = new THREE.WebGLRenderer();
            renderer.setSize(screen.width, screen.height);
            renderer.setClearColor(0xFFFFFF);

            container = document.getElementById('container');
            container.appendChild(renderer.domElement);

            document.addEventListener('mousedown', onMouseDown);
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);


            var object,
                material;
            
            var
                geo = new THREE.SphereGeometry(2, 24, 24);
            
            for(var i =0; i< 20; i++){
                material = new THREE.MeshPhongMaterial({
                    color : 0xFFFFFF
                });

                object = new THREE.Mesh(geo.clone(), material);
                objects.push(object);
                scene.add(object);
            }
        }

        function onMouseDown(e){
            var 
                mouse = {
                    x : (e.clientX / window.innerWidth) * 2 - 1,
                    y : -(e.clientY / window.innerHeight) * 2 + 1 
                },
                vector = new THREE.Vector3(mouse.x, mouse.y, 1);
            
            vector.unproject(camera);

            raycaster.set(camera.position, vector.sub(camera.position).normalize());

            var
                intersects = raycaster.intersectObjects(objects);
            
            if(intersects.length > 0){
                selection = intersects[0].object;
                console.log('selection', selection);
            }
        }

        function onMouseMove(e){

        }

        function onMouseUp(e){

        }

        function animate(){
            requestAnimationFrame(animate);
            render();
        }

        function render(){
            renderer.render(scene, camera);

        }

        init();
        animate();


    </script>
</body>
</html>